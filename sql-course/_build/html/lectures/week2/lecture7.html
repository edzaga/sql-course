

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Lectura 7 - Sentencia SELECT Básica &mdash; Curso ALMA SQL</title>
    
    <link rel="stylesheet" href="../../_static/sqlcourse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Curso ALMA SQL" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li><a href="../../index.html">Curso SQL</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/alma200.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">Lectura 7 - Sentencia SELECT Básica</a><ul>
<li><a class="reference internal" href="#desde-el-algebra-relacional">Desde el Algebra Relacional</a></li>
<li><a class="reference internal" href="#select-from-where">SELECT-FROM-WHERE</a></li>
<li><a class="reference internal" href="#resultados-repetidos">Resultados Repetidos</a></li>
<li><a class="reference internal" href="#select-by-order">SELECT-BY-ORDER</a></li>
</ul>
</li>
</ul>

  <h3>Esta página</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/lectures/week2/lecture7.txt"
           rel="nofollow">Enseñar el código</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Introduzca los términos de búsqueda o un módulo, clase o nombre de función.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="lectura-7-sentencia-select-basica">
<h1>Lectura 7 - Sentencia SELECT Básica<a class="headerlink" href="#lectura-7-sentencia-select-basica" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Corresponde a la forma más simple de hacer una consulta en SQL, la cual sirve para preguntar por aquellas tuplas de una relación
que satisfagan una condición. Es análoga a la selección en álgebra relacional. Esta consulta, al igual que la mayoría
de las realizadas en este lenguaje de programación, utiliza 3 palabras clave: SELECT - FROM - WHERE.</p>
<p>En palabras simples, lo que se busca con esta consulta es seleccionar cierta información (SELECT) de alguna tabla (FROM)
que satisfaga (WHERE) ciertas condiciones. Por ejemplo:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">Obtener</span> <span class="n">los</span> <span class="n">nombres</span> <span class="n">de</span> <span class="n">los</span> <span class="n">alumnos</span> <span class="n">que</span> <span class="n">hayan</span> <span class="n">nacido</span> <span class="n">en</span> <span class="n">el</span> <span class="n">mes</span> <span class="n">de</span> <span class="n">Noviembre</span>
<span class="k">SELECT</span> <span class="ss">&quot;los nombres&quot;</span> <span class="k">FROM</span> <span class="ss">&quot;alumnos&quot;</span> <span class="k">WHERE</span> <span class="ss">&quot;hayan nacido en el mes de Noviembre&quot;</span>
</pre></div>
</div>
<p>Cabe destacar que en este ejemplo, se infiere la existencia de una tabla de nombre <strong>alumnos</strong> que alberga datos personales de ciertos
estudiantes.</p>
<div class="section" id="desde-el-algebra-relacional">
<h2>Desde el Algebra Relacional<a class="headerlink" href="#desde-el-algebra-relacional" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-0">El operador de selección en el Algebra relacional hace uso de la palabra clave  WHERE. Por lo general, las expresiones que siguen
a esta keyword incluyen expresiones condicionales. Podemos construir expresiones mediante la comparación de valores (como por ejemplo
tipos de datos enteros, cadenas de caracteres, etc) utilizando los 6 operadores más comunes de comparación:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">=</span></tt>   &#8220;igual a&#8221;</li>
<li><tt class="docutils literal"><span class="pre">&lt;&gt;</span></tt>   &#8220;distinto a&#8221; o &#8220;no igual a&#8221;</li>
<li><tt class="docutils literal"><span class="pre">&lt;</span></tt>   &#8220;menor que&#8221;</li>
<li><tt class="docutils literal"><span class="pre">&gt;</span></tt>   &#8220;mayor que&#8221;</li>
<li><tt class="docutils literal"><span class="pre">&lt;=</span></tt>   &#8220;menor o igual a&#8221;</li>
<li><tt class="docutils literal"><span class="pre">&gt;=</span></tt>   &#8220;mayor o igual a&#8221;</li>
</ul>
</div></blockquote>
<p>Estos operadores tienen el mismo significado que en el lenguaje C, siendo el único diferente el símbolo &#8220;&lt;&gt;&#8221; que corresponde a
&#8220;distinto a&#8221;; el lenguaje C utiliza el símbolo &#8221;!=&#8221; para este comparador. Siguiendo la comparación entre estos lenguajes, el símbolo de
igualdad en SQL corresponde a &#8220;=&#8221;, mientras que en C es &#8220;==&#8221;.</p>
<p>Estos valores pueden ser comparados incluyendo constantes y atributos de las relaciones nombradas despues de la palabra clave FROM.
En el ejemplo, correspondería al atributo del mes de nacimiento del individuo con el mes de Noviembre.</p>
<p>Algunos ejemplos de comparación:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">StudioName</span> <span class="o">=</span> <span class="s1">&#39;Ubisoft&#39;</span> <span class="p">:</span> <span class="n">se</span> <span class="n">compara</span> <span class="n">que</span> <span class="n">el</span> <span class="n">atributo</span> <span class="n">studioName</span> <span class="n">sea</span> <span class="s1">&#39;Ubisoft&#39;</span>
<span class="n">mesesVidaUtil</span> <span class="o">&lt;&gt;</span> <span class="mi">5</span> <span class="p">:</span> <span class="n">se</span> <span class="n">compara</span> <span class="n">que</span> <span class="n">el</span> <span class="n">atributo</span> <span class="n">mesesVidaUtil</span> <span class="k">no</span> <span class="n">sea</span> <span class="n">igual</span> <span class="n">a</span> <span class="mi">5</span>
<span class="n">mesNacimiento</span> <span class="o">=</span> <span class="s1">&#39;Noviembre&#39;</span><span class="p">:</span>  <span class="n">se</span> <span class="n">compara</span> <span class="n">que</span> <span class="n">el</span> <span class="n">atributo</span> <span class="n">mesNacimiento</span> <span class="n">sea</span> <span class="n">igual</span> <span class="n">a</span> <span class="s1">&#39;Noviembre&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="select-from-where">
<h2>SELECT-FROM-WHERE<a class="headerlink" href="#select-from-where" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-1">Trabajemos bajo el siguiente ejemplo, el cual consiste en <em>seleccionar</em> toda la
información de la relación (o tabla) <strong>Empleados</strong> cuyos atributos <em>departamento</em> sea
&#8216;Informatica&#8217; y que su atributo <em>ano_ingreso</em> sea mayor o igual al año  2005.</p>
<p>Para comenzar a realizar este ejemplo, primero debemos <em>crear</em> la tabla <strong>Empleados</strong>
de la siguiente manera.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">id_empleado</span> <span class="nb">serial</span><span class="p">,</span> <span class="n">nombre_empleado</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>  <span class="n">departamento</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">ano_ingreso</span> <span class="nb">INTEGER</span><span class="p">);</span>
</pre></div>
</div>
<p>retornando lo siguiente PostgreSQL.:</p>
<div class="highlight-python"><pre>NOTICE:  CREATE TABLE creará una secuencia implícita «empleados_id_empleado_seq» para la columna serial «empleados.id_empleado»
CREATE TABLE</pre>
</div>
<p>Ahora <em>insertaremos</em> algunos datos en la tabla <strong>Empleados</strong>.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Edgar&#39;</span><span class="p">,</span> <span class="s1">&#39;Administracion&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Andrew&#39;</span><span class="p">,</span> <span class="s1">&#39;Comercial&#39;</span><span class="p">,</span> <span class="mi">2009</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Valerie&#39;</span><span class="p">,</span> <span class="s1">&#39;Informatica&#39;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Karl&#39;</span><span class="p">,</span> <span class="s1">&#39;Informatica&#39;</span><span class="p">,</span> <span class="mi">2008</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Kevin&#39;</span><span class="p">,</span> <span class="s1">&#39;Finanzas&#39;</span><span class="p">,</span> <span class="mi">2010</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Finalmente podemos realizar la consulta que nos interesa.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">WHERE</span> <span class="n">departamento</span><span class="o">=</span><span class="s1">&#39;Informatica&#39;</span> <span class="k">AND</span> <span class="n">ano_ingreso</span><span class="o">&gt;=</span><span class="mi">2005</span><span class="p">;</span>
 <span class="n">id_empleado</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">-------------+-----------------+--------------+-------------</span>
           <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span> <span class="n">Informatica</span>  <span class="o">|</span>        <span class="mi">2008</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">fila</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Podemos notar que la consulta retorna el registro que se cumplian las dos
condiciones.</p>
</div>
<p>Podemos realizar la siguiente consulta, encontrar en la tabla <strong>Empleados</strong> el registro de la(s)
personas que sean del departamento de &#8216;Informática&#8217; o que su año de ingreso sea mayor o igual
al año 2005.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">WHERE</span> <span class="n">departamento</span><span class="o">=</span><span class="s1">&#39;Informatica&#39;</span> <span class="k">OR</span> <span class="n">ano_ingreso</span><span class="o">&gt;=</span><span class="mi">2005</span><span class="p">;</span>
 <span class="n">id_empleado</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">-------------+-----------------+--------------+-------------</span>
           <span class="mi">2</span> <span class="o">|</span> <span class="n">Andrew</span>          <span class="o">|</span> <span class="n">Comercial</span>    <span class="o">|</span>        <span class="mi">2009</span>
           <span class="mi">3</span> <span class="o">|</span> <span class="n">Valerie</span>         <span class="o">|</span> <span class="n">Informatica</span>  <span class="o">|</span>        <span class="mi">2000</span>
           <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span> <span class="n">Informatica</span>  <span class="o">|</span>        <span class="mi">2008</span>
           <span class="mi">5</span> <span class="o">|</span> <span class="n">Kevin</span>           <span class="o">|</span> <span class="n">Finanzas</span>     <span class="o">|</span>        <span class="mi">2010</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Podemos observar que la consulta realizada retorna los registros que cumplen con una
de las dos condiciones o cuando se cumplen las dos al mismo tiempo.</p>
</div>
<p>Esta consulta presentó un ejemplo básico de una consulta SELECT-FROM-WHERE de la
mayoría de las consultas SQL. La palabra clave FROM entrega la relación o relaciones
de donde se obtiene la información (tablas). En estos ejemplos, se utilizaron dos comparaciones
unidas por la condición &#8220;AND&#8221; y &#8220;OR&#8221;.</p>
<p>El atributo <em>departamento</em> de la tabla <strong>Empleados</strong> es probada por igualdad contra la
constante &#8216;Informática&#8217;. Esta constante corresponde a una cadena de caracteres de largo
variable que en SQL como se detalló en la lectura anterior se denomina como VARCHAR(n) y
que al momento del <em>ingreso</em> de los datos a las tablas se escribe entre comillas simples.</p>
<p>Como se mencionó anteriormente, la consulta del tipo SELECT-FROM-WHERE busca la
información de una o más relaciones que cumplan con ciertas condiciones. Hasta ahora
sólo se ha visto qué pasa si se comparan atributos de las relaciones con constantes.
Pero ¿cómo se pueden comparar los valores almacenados de  atributos que están en varias relaciones?.</p>
<p>El ejemplo anterior se podría realizar de otra manera para poder combinar dos relaciones
(tablas) a la hora de realizar la consulta, pero primero debemos realizar la <em>creación</em> de la
tabla <strong>Empleados</strong> y <strong>Departamentos</strong>.</p>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Antes de realizar la <em>creación</em> de las tablas, hay que borrar la tabla <strong>Empleados</strong>
con un <tt class="code sql highlight docutils literal"><span class="k"><span class="pre">DROP</span></span> <span class="k"><span class="pre">TABLE</span></span> <span class="n"><span class="pre">Empleados</span></span></tt>.</p>
</div>
<p>Para poder realizar el ejemplo debemos crear la tabla de <strong>Departamentos</strong>.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">id_departamento</span> <span class="nb">serial</span><span class="p">,</span> <span class="n">departamento</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id_departamento</span><span class="p">));</span>
</pre></div>
</div>
<p>retornando PostgreSQL que la tabla <strong>Departamentos</strong> ha sido correctamente creada.:</p>
<div class="highlight-python"><pre>NOTICE:  CREATE TABLE creará una secuencia implícita «departamentos_id_departamento_seq» para la columna serial «departamentos.id_departamento»
NOTICE:  CREATE TABLE / PRIMARY KEY creará el índice implícito «departamentos_pkey» para la tabla «departamentos»
CREATE TABLE</pre>
</div>
<p>Y ahora creamos la tabla <strong>Empleados</strong>.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">id_empleados</span> <span class="nb">serial</span><span class="p">,</span> <span class="n">nombre_empleado</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">id_departamento</span> <span class="nb">INTEGER</span><span class="p">,</span> <span class="n">ano_ingreso</span> <span class="nb">INTEGER</span><span class="p">,</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id_empleados</span><span class="p">),</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id_departamento</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">id_departamento</span><span class="p">));</span>
</pre></div>
</div>
<p>retornando PostgreSQL que la tabla <strong>Empleados</strong> ha sido correctamente creada.:</p>
<div class="highlight-python"><pre>NOTICE:  CREATE TABLE creará una secuencia implícita «empleados_id_empleados_seq» para la columna serial «empleados.id_empleados»
NOTICE:  CREATE TABLE / PRIMARY KEY creará el índice implícito «empleados_pkey» para la tabla «empleados»
CREATE TABLE</pre>
</div>
<p>ahora debemos <em>ingresar</em> los datos en la tabla <strong>Departamentos</strong> y <strong>Empleados</strong>.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">departamento</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Administracion&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">departamento</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Informatica&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">departamento</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Finanzas&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Departamentos</span><span class="p">(</span><span class="n">departamento</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Comercial&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>

<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">id_departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Edgar&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">id_departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Andrew&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2009</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">id_departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Valerie&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">id_departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Karl&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2008</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Empleados</span><span class="p">(</span><span class="n">nombre_empleado</span><span class="p">,</span> <span class="n">id_departamento</span><span class="p">,</span> <span class="n">ano_ingreso</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;Kevin&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2010</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Ahora realizamos la siguiente consulta, encontrar en la tabla <strong>Empleados</strong> el registro
de la(s) personas que sean del departamento de &#8216;Informatica&#8217; y que su año de ingreso
sea mayor o igual al año 2005.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span><span class="p">,</span> <span class="n">Departamentos</span> <span class="k">WHERE</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">id_departamento</span><span class="o">=</span><span class="n">Departamentos</span><span class="p">.</span><span class="n">id_departamento</span> <span class="k">AND</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">ano_ingreso</span><span class="o">&gt;=</span><span class="mi">2005</span> <span class="k">AND</span> <span class="n">Departamentos</span><span class="p">.</span><span class="n">departamento</span><span class="o">=</span><span class="s1">&#39;Informatica&#39;</span><span class="p">;</span>
 <span class="n">id_empleados</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">departamento</span>
<span class="c1">--------------+-----------------+-----------------+-------------+-----------------+--------------</span>
            <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2008</span> <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span> <span class="n">Informatica</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">fila</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Es posible dar referencia a un atributo de cada tabla con <strong>nombre_tabla.atributo</strong>, para
realizar las condiciones.</p>
</div>
<p>Independientemente del tipo de consulta, el resultado de una comparación es un valor booleano, es decir retorna valores TRUE o FALSE, los
cuales se pueden combinar con sus operadores AND, OR y NOT, con sus respectivos significados.</p>
<p>A modo de repaso, los operadores lógicos mencionados son:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt><tt class="code sql highlight docutils literal"><span class="k"><span class="pre">AND</span></span></tt>: Retorna TRUE siempre y cuando TODOS los atributos a comparar sean TRUE. Si hay AL MENOS UN valor FALSE, retornará FALSE.</dt>
<dd><p class="first last">Su tabla de verdad es:</p>
</dd>
</dl>
<div class="math">
\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{P} &amp; \textbf{Q} &amp; \textbf{AND} \\
 \hline
 \text{True}       &amp; \text{True}       &amp;  \text{True}   \\
 \text{True}       &amp; \text{False}      &amp;  \text{False}  \\
 \text{False}      &amp; \text{True}       &amp;  \text{False}  \\
 \text{False}      &amp; \text{False}      &amp;  \text{False}  \\
 \hline
\end{array}\end{split}\]</div>
</li>
<li><dl class="first docutils">
<dt><tt class="code sql highlight docutils literal"><span class="k"><span class="pre">OR</span></span></tt>: Retorna TRUE siempre y cuando AL MENOS UNO de los atributos a comparar sea TRUE. Si TODOS los valores son FALSE, retornará FALSE.</dt>
<dd><p class="first last">Su tabla de verdad es:</p>
</dd>
</dl>
<div class="math">
\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{P} &amp; \textbf{Q} &amp; \textbf{OR} \\
 \hline
 \text{True}       &amp; \text{True}       &amp;  \text{True}  \\
 \text{True}       &amp; \text{False}      &amp;  \text{True}  \\
 \text{False}      &amp; \text{True}       &amp;  \text{True}  \\
 \text{False}      &amp; \text{False}      &amp;  \text{False}  \\
 \hline
\end{array}\end{split}\]</div>
</li>
<li><dl class="first docutils">
<dt><tt class="code sql highlight docutils literal"><span class="k"><span class="pre">NOT</span></span></tt>: Retorna el valor contrario al valor actual, es decir que si el valor es TRUE, retorna FALSE y vice versa.</dt>
<dd><p class="first last">Su tabla de verdad es</p>
</dd>
</dl>
<div class="math">
\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{P} &amp; \textbf{NOT P} \\
 \hline
 \text{True}       &amp; \text{False}  \\
 \text{False}      &amp; \text{True}   \\
 \hline
\end{array}\end{split}\]</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">SQL no distingue entre mayúsculas y minúsculas.
Por ejemplo, <tt class="code sql highlight docutils literal"><span class="k"><span class="pre">FROM</span></span></tt> (palabra reservada) es equivalente a <tt class="code sql highlight docutils literal"><span class="k"><span class="pre">from</span></span></tt>,
inclusive a <tt class="code sql highlight docutils literal"><span class="k"><span class="pre">From</span></span></tt>.
Para los nombres de atributos, relaciones, etc., también ocurre lo mismo.
El único caso en que se distingue entre mayúsculas y minúsculas es al momento de
encerrar un string entre <em>&#8216; &#8216;</em>. Por ejemplo <em>&#8216;PALABRA&#8217;</em> es diferente a <em>&#8216;palabra&#8217;</em>.</p>
</div>
</div>
<div class="section" id="resultados-repetidos">
<h2>Resultados Repetidos<a class="headerlink" href="#resultados-repetidos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Al realizar una consulta SELECT, no hay omisión de resultados repetidos, este &#8220;problema&#8221; se soluciona agregando DISTINCT a la consulta.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="k">FROM</span> <span class="k">WHERE</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="k">FROM</span> <span class="k">WHERE</span>
</pre></div>
</div>
<p>En el ejemplo anterior también es posible eliminar los resultados repetidos, puesto que
existen muchas personas que trabajan en el mismo departamento, pero si eliminamos las
repeticiones solo nos retornaran los departamentos que existen.</p>
<p>Primero mostraremos un resultado con una consulta con repeticiones.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="n">Departamentos</span><span class="p">.</span><span class="n">departamento</span><span class="p">,</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">id_departamento</span> <span class="k">FROM</span> <span class="n">Empleados</span><span class="p">,</span> <span class="n">Departamentos</span> <span class="k">WHERE</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">id_departamento</span><span class="o">=</span><span class="n">Departamentos</span><span class="p">.</span><span class="n">id_departamento</span><span class="p">;</span>     <span class="n">departamento</span>  <span class="o">|</span> <span class="n">id_departamento</span>
<span class="c1">----------------+-----------------</span>
 <span class="n">Administracion</span> <span class="o">|</span>               <span class="mi">1</span>
 <span class="n">Comercial</span>      <span class="o">|</span>               <span class="mi">4</span>
 <span class="n">Informatica</span>    <span class="o">|</span>               <span class="mi">2</span>
 <span class="n">Informatica</span>    <span class="o">|</span>               <span class="mi">2</span>
 <span class="n">Finanzas</span>       <span class="o">|</span>               <span class="mi">3</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Según los datos que se ingresaron en la tabla <strong>Empleados</strong> existe más de una persona
en el departamento de &#8216;Informática&#8217;.</p>
</div>
<p>Y ahora realizamos una consulta sin repeticiones.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">Departamentos</span><span class="p">.</span><span class="n">departamento</span><span class="p">,</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">id_departamento</span> <span class="k">FROM</span> <span class="n">Empleados</span><span class="p">,</span> <span class="n">Departamentos</span> <span class="k">WHERE</span> <span class="n">Empleados</span><span class="p">.</span><span class="n">id_departamento</span><span class="o">=</span><span class="n">Departamentos</span><span class="p">.</span><span class="n">id_departamento</span><span class="p">;</span>
  <span class="n">departamento</span>  <span class="o">|</span> <span class="n">id_departamento</span>
<span class="c1">----------------+-----------------</span>
 <span class="n">Administracion</span> <span class="o">|</span>               <span class="mi">1</span>
 <span class="n">Informatica</span>    <span class="o">|</span>               <span class="mi">2</span>
 <span class="n">Comercial</span>      <span class="o">|</span>               <span class="mi">4</span>
 <span class="n">Finanzas</span>       <span class="o">|</span>               <span class="mi">3</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Se puede notar que solo nos retorna los departamentos que existen.</p>
</div>
</div>
<div class="section" id="select-by-order">
<h2>SELECT-BY-ORDER<a class="headerlink" href="#select-by-order" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-2">Hasta este momento, es posible obtener datos de una tabla utilizando los comandos SELECT y WHERE. Sin embargo, muchas veces es
necesario enumerar el resultado en un orden particular. Esto podría ser en orden ascendente, en orden descendente, o podría basarse en
valores numéricos o de texto. En tales casos, podemos utilizar la palabra clave ORDER BY para lograr esto.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="ss">&quot;L&quot;</span>
<span class="k">FROM</span> <span class="ss">&quot;R&quot;</span>
<span class="k">WHERE</span> <span class="ss">&quot;C&quot;</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="ss">&quot;O&quot;</span> <span class="p">[</span><span class="k">ASC</span><span class="p">,</span> <span class="k">DESC</span><span class="p">];</span>
</pre></div>
</div>
<p>donde:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;L&#8221; corresponde a la lista de atributos que se requieren, por lo general se asocia a una(s) columna(s).</li>
<li>&#8220;R&#8221; corresponde al nombre de la relación, que por lo general se asocia a una tabla.</li>
<li>&#8220;C&#8221; corresponde a la condición de la selección.</li>
<li>&#8220;O&#8221; corresponde a cómo será ordenada la lista &#8220;L&#8221;.</li>
<li>ASC corresponde a un orden ascendente (corresponde a la opción por defecto)</li>
<li>DESC corresponde a uno descendente.</li>
</ul>
</div></blockquote>
<p>Estrictamente, su sintaxis corresponde a ORDER BY y luego una lista de atributos que definirán los campos a ordenar:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">atributo1</span><span class="p">,</span> <span class="n">atributo2</span> <span class="p">...</span>
<span class="k">FROM</span> <span class="n">Clientes</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">atributo_ordenar_primero</span><span class="p">,</span> <span class="n">atributo_ordenar_segundo</span><span class="p">...</span>
</pre></div>
</div>
<p>Como se puede apreciar, con la sentencia ORDER BY se pueden ordenar las consultas a través de múltiples atributos. En este caso todos los
campos estarían ordenados de forma ascendente (ASC).</p>
<p>Podemos utilizar los mismos ejemplos que creamos anteriormente ordenando los nombres
de los empleados de la tabla <strong>Empleados</strong>.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">nombre_empleado</span><span class="p">;</span>
 <span class="n">id_empleados</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">--------------+-----------------+-----------------+-------------</span>
            <span class="mi">2</span> <span class="o">|</span> <span class="n">Andrew</span>          <span class="o">|</span>               <span class="mi">4</span> <span class="o">|</span>        <span class="mi">2009</span>
            <span class="mi">1</span> <span class="o">|</span> <span class="n">Edgar</span>           <span class="o">|</span>               <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2000</span>
            <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2008</span>
            <span class="mi">5</span> <span class="o">|</span> <span class="n">Kevin</span>           <span class="o">|</span>               <span class="mi">3</span> <span class="o">|</span>        <span class="mi">2010</span>
            <span class="mi">3</span> <span class="o">|</span> <span class="n">Valerie</span>         <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2000</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<p>Que es lo mismo que escribir.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">nombre_empleado</span> <span class="k">ASC</span><span class="p">;</span>
 <span class="n">id_empleados</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">--------------+-----------------+-----------------+-------------</span>
            <span class="mi">2</span> <span class="o">|</span> <span class="n">Andrew</span>          <span class="o">|</span>               <span class="mi">4</span> <span class="o">|</span>        <span class="mi">2009</span>
            <span class="mi">1</span> <span class="o">|</span> <span class="n">Edgar</span>           <span class="o">|</span>               <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2000</span>
            <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2008</span>
            <span class="mi">5</span> <span class="o">|</span> <span class="n">Kevin</span>           <span class="o">|</span>               <span class="mi">3</span> <span class="o">|</span>        <span class="mi">2010</span>
            <span class="mi">3</span> <span class="o">|</span> <span class="n">Valerie</span>         <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2000</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<p>Y de forma descendiente sería de la siguiente manera.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">nombre_empleado</span> <span class="k">DESC</span><span class="p">;</span>
 <span class="n">id_empleados</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">--------------+-----------------+-----------------+-------------</span>
            <span class="mi">3</span> <span class="o">|</span> <span class="n">Valerie</span>         <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2000</span>
            <span class="mi">5</span> <span class="o">|</span> <span class="n">Kevin</span>           <span class="o">|</span>               <span class="mi">3</span> <span class="o">|</span>        <span class="mi">2010</span>
            <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2008</span>
            <span class="mi">1</span> <span class="o">|</span> <span class="n">Edgar</span>           <span class="o">|</span>               <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2000</span>
            <span class="mi">2</span> <span class="o">|</span> <span class="n">Andrew</span>          <span class="o">|</span>               <span class="mi">4</span> <span class="o">|</span>        <span class="mi">2009</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
<p>También es posible realizarlo con números o fechas.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="n">postgres</span><span class="o">=#</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Empleados</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">ano_ingreso</span> <span class="k">DESC</span><span class="p">;</span>
 <span class="n">id_empleados</span> <span class="o">|</span> <span class="n">nombre_empleado</span> <span class="o">|</span> <span class="n">id_departamento</span> <span class="o">|</span> <span class="n">ano_ingreso</span>
<span class="c1">--------------+-----------------+-----------------+-------------</span>
            <span class="mi">5</span> <span class="o">|</span> <span class="n">Kevin</span>           <span class="o">|</span>               <span class="mi">3</span> <span class="o">|</span>        <span class="mi">2010</span>
            <span class="mi">2</span> <span class="o">|</span> <span class="n">Andrew</span>          <span class="o">|</span>               <span class="mi">4</span> <span class="o">|</span>        <span class="mi">2009</span>
            <span class="mi">4</span> <span class="o">|</span> <span class="n">Karl</span>            <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2008</span>
            <span class="mi">1</span> <span class="o">|</span> <span class="n">Edgar</span>           <span class="o">|</span>               <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2000</span>
            <span class="mi">3</span> <span class="o">|</span> <span class="n">Valerie</span>         <span class="o">|</span>               <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2000</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">filas</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li><a href="../../index.html">Curso SQL</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Computer Systems Research Group (CSRG), UTFSM.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>