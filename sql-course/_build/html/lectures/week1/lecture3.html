

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Lectura 3 - Álgebra Relacional: Select, Project, Join &mdash; Curso ALMA SQL</title>
    
    <link rel="stylesheet" href="../../_static/sqlcourse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Curso ALMA SQL" href="../../index.html" />
    <link rel="up" title="Primera Semana" href="index.html" />
    <link rel="next" title="Lectura 4 - Álgebra Relacional: Set operators, renaming, notation" href="lecture4.html" />
    <link rel="prev" title="Lectura 2 - Bases de datos relacionales: Consulta de bases de datos relacionales" href="lecture2.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="lecture4.html" title="Lectura 4 - Álgebra Relacional: Set operators, renaming, notation"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="lecture2.html" title="Lectura 2 - Bases de datos relacionales: Consulta de bases de datos relacionales"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">Curso SQL</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Primera Semana</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/alma200.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">Lectura 3 - Álgebra Relacional: Select, Project, Join</a><ul>
<li><a class="reference internal" href="#conceptos-basicos-de-algebra-relacional">Conceptos básicos de álgebra relacional</a></li>
<li><a class="reference internal" href="#operaciones-relacionales">Operaciones relacionales:</a><ul>
<li><a class="reference internal" href="#seleccion-select">Selección(Select)</a><ul>
<li><a class="reference internal" href="#ejemplo-1">Ejemplo 1</a></li>
<li><a class="reference internal" href="#ejemplo-2">Ejemplo 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#proyeccion-project">Proyección (Project)</a><ul>
<li><a class="reference internal" href="#id1">Ejemplo 1</a></li>
<li><a class="reference internal" href="#id2">Ejemplo 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#producto-cartesiano-cross-product">Producto cartesiano (Cross-Product)</a><ul>
<li><a class="reference internal" href="#id3">Ejemplo 1</a></li>
<li><a class="reference internal" href="#id4">Ejemplo 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#naturaljoin">NaturalJoin</a><ul>
<li><a class="reference internal" href="#id5">Ejemplo 1</a></li>
<li><a class="reference internal" href="#id6">Ejemplo 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#thetajoin">ThetaJoin</a><ul>
<li><a class="reference internal" href="#id9">Ejemplo 1</a></li>
<li><a class="reference internal" href="#id10">Ejemplo 2</a></li>
<li><a class="reference internal" href="#ejercicio-propuesto">Ejercicio propuesto</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="lecture2.html"
                        title="Capítulo anterior">Lectura 2 - Bases de datos relacionales: Consulta de bases de datos relacionales</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="lecture4.html"
                        title="Próximo capítulo">Lectura 4 - Álgebra Relacional: Set operators, renaming, notation</a></p>
  <h3>Esta página</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/lectures/week1/lecture3.txt"
           rel="nofollow">Enseñar el código</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Introduzca los términos de búsqueda o un módulo, clase o nombre de función.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="lectura-3-algebra-relacional-select-project-join">
<h1>Lectura 3 - Álgebra Relacional: Select, Project, Join<a class="headerlink" href="#lectura-3-algebra-relacional-select-project-join" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="conceptos-basicos-de-algebra-relacional">
<h2>Conceptos básicos de álgebra relacional<a class="headerlink" href="#conceptos-basicos-de-algebra-relacional" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-0">Algebra, en general, consiste de operadores y operandos atómicos, por ejemplo,
en el álgebra de la aritmética, los operandos atómicos son variable como <span class="math">\(r\)</span>,
y constantes como 15.
Los operadores son los usuales en la aritmética:</p>
<blockquote>
<div><ul class="simple">
<li>Suma,</li>
<li>Resta,</li>
<li>Multiplicación,</li>
<li>División.</li>
</ul>
</div></blockquote>
<p>Cualquier álgebra nos permite construir expresiones mediante la aplicación de
operadores a operandos atómicos y/o otras expresiones del álgebra.
En general, los paréntesis son necesarios para agrupar operadores y sus operandos,
por ejemplo,
en aritmética tenemos expresiones tales como <span class="math">\((x + y) * z\)</span> ó <span class="math">\(((x + 7)/(y - 3)) + x\)</span>.</p>
<p>El Álgebra Relacional es otro ejemplo del álgebra. Sus operandos atómicos son:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Variables que representan relaciones.</li>
<li>Constantes que son relaciones finitas.</li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En algunos textos de álgebra relacional o SQL, una relación es sinónimo de una tabla.</p>
</div>
<p>Como mencionamos, en el álgebra relacional clásica, todos los operandos y sus resultados
de expresiones son conjuntos. Los operadores del álgebra relacional tradicional se divide
en cuatro grandes categorías:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>Los conjuntos habituales de operaciones <tt class="docutils literal"><span class="pre">unión</span></tt>, <tt class="docutils literal"><span class="pre">intersección</span></tt>, y <tt class="docutils literal"><span class="pre">diferencia</span></tt> se aplica a las relaciones.</li>
<li>Las operaciones que eliminan parte de una relación: <tt class="docutils literal"><span class="pre">selección</span></tt> elimina algunas <strong>filas (o tuplas)</strong>, y <tt class="docutils literal"><span class="pre">proyección</span></tt> elimina algunas <strong>columnas</strong>.</li>
<li>Las operaciones que combinan las tuplas de dos relaciones, como el <tt class="docutils literal"><span class="pre">producto</span> <span class="pre">cartesiano</span></tt>, que empareja las tuplas de dos relaciones en todas las maneras posibles y varios tipos de  operadores <tt class="docutils literal"><span class="pre">unión</span></tt>, los cuales forman parejas de tuplas de dos relaciones selectivamente.</li>
<li>Una operación llama “renombrar” que no afecta las tuplas de una relación, pero que cambia el esquema de relación, es decir, lo nombres de los atributos y/o los nombres de la relación misma.</li>
</ol>
</div></blockquote>
<p>Debemos por lo general referirnos a las expresiones del álgebra relacional como consultas.
A pesar de que aún no tengan los símbolos necesarios para mostrar muchas de las expresiones
del algebra relacional, se debería familiarizar con las operaciones de <strong>grupo (a)</strong>;
y por lo tanto reconocer: <span class="math">\(\text{R} \cup \text{S}\)</span> como un ejemplo de una expresión de álgebra relacional.
Donde <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span> son operandos atómicos para relaciones, cuyos conjuntos de tuplas son desconocidas.
Esta consulta pregunta por la <tt class="docutils literal"><span class="pre">unión</span></tt> de cualquiera tuplas que están en las relaciones
nombradas <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span>.</p>
<p>Las tres operaciones más comunes en conjuntos son <tt class="docutils literal"><span class="pre">unión</span></tt>, <tt class="docutils literal"><span class="pre">intersección</span></tt>, y <tt class="docutils literal"><span class="pre">diferencia</span></tt>,
que serán vistas en la lectura 4.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Resumiendo <strong>Álgebra Relacional</strong> se define como un conjunto de operaciones que se ejecutan sobre las relaciones (tablas) para obtener un resultado, el cual es otra relación.</p>
</div>
</div>
<div class="section" id="operaciones-relacionales">
<h2>Operaciones relacionales:<a class="headerlink" href="#operaciones-relacionales" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-1">Los operadores relacionales se utilizan para filtrar, cortar o combinar tablas.</p>
<div class="section" id="seleccion-select">
<h3>Selección(Select)<a class="headerlink" href="#seleccion-select" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-2">Este operador se aplica a una relación <span class="math">\(\text{R}\)</span> produciendo una nueva relación con un
subconjunto de tuplas de <span class="math">\(\text{R}\)</span>. Las tuplas de la relación resultante son las que
satisfacen una condición <span class="math">\(C\)</span> sobre algún atributo de <span class="math">\(R\)</span>. Es decir selecciona <strong>filas (tuplas)</strong>
de una tabla según un cierto criterio <span class="math">\(C\)</span>. El criterio <span class="math">\(C\)</span> es una expresión condicional, similar
a las declaraciones del tipo “if”, es “booleana” esto quiere decir que para cada
tupla de <span class="math">\(\text{R}\)</span> toma el valor Verdad(true) o Falso(false).</p>
<ul>
<li><p class="first">Valores de atributos con &#8220;NULL&#8221; no cumplirán ninguna condición.</p>
</li>
<li><p class="first">Cada condición simple o cláusula C tiene el formato:
<tt class="docutils literal"><span class="pre">&lt;Atributo&gt;</span> <span class="pre">&lt;Comparador&gt;</span> <span class="pre">&lt;Atributo</span> <span class="pre">o</span> <span class="pre">Constante</span> <span class="pre">del</span> <span class="pre">Dominio&gt;}</span></tt>.
donde, el campo <tt class="docutils literal"><span class="pre">Comparador</span></tt> es un <strong>operador lógico</strong>, que
pueden ser <span class="math">\(\{= , \geq , &gt; , &lt; , \neq , \leq \}\)</span>.</p>
<blockquote>
<div><ul class="simple">
<li><span class="math">\(=\)</span> : símbolo de igual que.</li>
<li><span class="math">\(\neq\)</span>: significa no igual a, en algunos libros este símbolo esta representado por <tt class="docutils literal"><span class="pre">!=</span></tt>.</li>
<li><span class="math">\(\geq\)</span>: mayor que o igual a.</li>
<li><span class="math">\(&gt;\)</span>: mayor que.</li>
<li><span class="math">\(&lt;\)</span>: menor que.</li>
<li><span class="math">\(\leq\)</span>: menor que o igual a.</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Los <strong>operadores lógicos</strong> que se utilizan, también llamados operadores relacionales, nos proporcionan
un resultado a partir de que se cumpla o no una cierta condición. Son símbolos que se usan para comparar
dos valores. Si el resultado de la comparación es correcto la expresión considerada es verdadera, en caso
contrario es falsa. Por ejemplo, 11&gt;4 (once mayor que cuatro) es verdadera, se representa por el valor true
del tipo básico boolean, en cambio, 11&lt;4 (once menor que cuatro) es falsa se representa por el valor false.</p>
<p>Las cláusulas <span class="math">\(C\)</span> pueden conectarse con otros operadores lógicos, que al igual que los anteriores que se usaban
como comparador (entre atributos o atributo y constante), arrojan booleano (true o false) de resultado:</p>
<ul class="simple">
<li><strong>NOT</strong>: El operador <tt class="docutils literal"><span class="pre">NOT</span></tt> denota una salida verdadera si la entrada es falsa,
y una salida falsa si la entrada es verdadera. Su notación en algebra es: <span class="math">\(¬\)</span> <span class="math">\(\text{C}_1\)</span>.</li>
<li><strong>AND</strong>: El operador <tt class="docutils literal"><span class="pre">AND</span></tt> denota una salida verdadera si y sólo si sus entradas
son verdaderas. Si <span class="math">\(\text{C}_1\)</span> se cumple y <span class="math">\(\text{C}_2\)</span> también se cumple, la salida será verdadera.
La notación en algebra de un <tt class="docutils literal"><span class="pre">AND</span></tt> es: <span class="math">\(\text{C}_1\ \wedge \ \text{C}_2\)</span>.</li>
<li><strong>OR</strong>: El operador <tt class="docutils literal"><span class="pre">OR</span></tt> denota una salida verdadera si hay alguna de las entradas
(o ambas) verdaderas. Si <span class="math">\(\text{C}_1\)</span> y/o <span class="math">\(\text{C}_2\)</span> es o son verdaderas, la expresión será verdadera.
La notación en algebra de un <tt class="docutils literal"><span class="pre">OR</span></tt> es: <span class="math">\(\text{C}_1\ \vee \ \text{C}_2\)</span>.</li>
</ul>
<p><strong>Notación en Álgebra Relacional</strong></p>
<p>Para representar <tt class="docutils literal"><span class="pre">Select</span></tt> en álgebra relacional se utiliza la letra griega sigma
<span class="math">\(\sigma\)</span>. Por lo tanto, si utilizamos la notación
<span class="math">\(\sigma_{c} \ \boldsymbol{R}\)</span> queremos decir que se aplica la condición
<span class="math">\(C\)</span> a cada tupla de <span class="math">\(\text{R}\)</span>. Si la condición es Verdad <tt class="docutils literal"><span class="pre">true</span></tt>,
dicha tupla pertenecerá al resultado y si es Falsa <tt class="docutils literal"><span class="pre">false</span></tt>, dicha tupla no será seleccionada.
El esquema de la relación resultante es el mismo esquema <span class="math">\(\text{R}\)</span>, se muestran los
atributos en el mismo orden que se usan en la tabla <span class="math">\(\text{R}\)</span>.</p>
<div class="section" id="ejemplo-1">
<h4>Ejemplo 1<a class="headerlink" href="#ejemplo-1" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}  \begin{array}{|c|c|c|c|}
   \hline
   \textbf{id} &amp; \textbf{nombre} &amp; \textbf{edad} &amp; \textbf{añosTrabajados}\\
   \hline
   123 &amp; \text{Leon} &amp; 39 &amp; 15 \\
   \hline
   234 &amp; \text{Tomas} &amp; 34 &amp; 10 \\
   \hline
   345 &amp; \text{Jose} &amp; 45 &amp; 21 \\
   \hline
   143 &amp; \text{Josefa} &amp; 25 &amp;  1 \\
   \hline
 \end{array}\end{split}\]</div>
<p>Seleccionar las tuplas de la tabla <span class="math">\(\text{Ingenieros}\)</span> que cumplan con tener una edad
mayor a 30 años:</p>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\begin{split}\sigma_{\text{edad&gt;30}} \hspace{0.2cm} \text{Ingenieros}\end{split}\]</div>
<img alt="../../_images/select2.png" class="align-center" src="../../_images/select2.png" />
<p>En la imagen se ve que selecciona solo las filas que cumplen con la condición que se pedía
(tener una edad mayor a 30 años), la tupla de &#8220;Josefa&#8221; queda fuera de la selección por no
cumplir la condición (pues 25 &lt; 30).
De esta forma la tabla queda:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}  \begin{array}{|c|c|c|c|}
   \hline
   \textbf{id} &amp; \textbf{nombre} &amp; \textbf{edad} &amp; \textbf{añosTrabajados}\\
   \hline
   123 &amp; \text{Leon} &amp; 39 &amp; 15 \\
   \hline
   234 &amp; \text{Tomas} &amp; 34 &amp; 10 \\
   \hline
   345 &amp; \text{Jose} &amp; 45 &amp; 21 \\
   \hline
 \end{array}\end{split}\]</div>
</div>
<div class="section" id="ejemplo-2">
<h4>Ejemplo 2<a class="headerlink" href="#ejemplo-2" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Seleccionar de la tabla <span class="math">\(\text{Ingenieros}\)</span> las personas que tienen más de 30 años
y que lleven menos de 16 años trabajando:</p>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\begin{split}\sigma_{(\text{edad} &gt;30 \wedge \text{añosTrabajados} &lt;16)}  \ \text{Ingenieros}\end{split}\]</div>
<img alt="../../_images/select3.png" class="align-center" src="../../_images/select3.png" />
<p>Al tener el operador lógico <tt class="docutils literal"><span class="pre">AND</span></tt> se pide que cumplan dos condiciones simultáneamente.
Primero que la edad sea mayor de 30 años, al igual que en el ejemplo anterior, la tupla
de &#8220;Josefa&#8221; queda fuera de la selección. Luego de las tuplas que quedan se evalúa la
segunda condición. En la imagen se aprecia, que solo se seleccionan las filas que no
tengan <tt class="docutils literal"><span class="pre">X</span></tt> en alguna de las condiciones.</p>
<p>Así finalmente quedaría la tabla:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{edad} &amp; \textbf{añosTrabajados} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 &amp; 15 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 &amp; 10 \\
 \hline
\end{array}\end{split}\]</div>
</div>
</div>
<div class="section" id="proyeccion-project">
<h3>Proyección (Project)<a class="headerlink" href="#proyeccion-project" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-3">El operador <tt class="docutils literal"><span class="pre">Proyección</span></tt> se utiliza para producir una nueva relación desde <span class="math">\(\text{R}\)</span>. Esta
nueva relación contiene sólo algunos de los atributos de <span class="math">\(\text{R}\)</span>,
es decir, realiza la selección de algunas de las <strong>columnas</strong> de una tabla <span class="math">\(\text{R}\)</span>.</p>
<p><strong>Notación en Álgebra Relacional</strong></p>
<p><tt class="docutils literal"><span class="pre">Project</span></tt> en Álgebra Relacional se representa por la letra griega <strong>pi</strong>:</p>
<div class="math">
\[\pi \hspace{0.2cm} _{(A_1,...,A_n)} \hspace{0.3cm} \text{R}\]</div>
<p>El resultado es una relación seleccionando solo los atributos <span class="math">\(A_1,...,A_n\)</span> de la
relación <span class="math">\(\text{R}\)</span>.
Si <span class="math">\(A_1,...,A_n\)</span> no incluye una llave (o clave), podrían producirse tuplas
repetidas en el resultado, las cuales serán eliminadas.</p>
<div class="section" id="id1">
<h4>Ejemplo 1<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{edad} &amp; \textbf{añosTrabajados} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 &amp; 15 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 &amp; 10 \\
 \hline
 345 &amp; \text{Jose} &amp; 45 &amp; 21 \\
 \hline
 143 &amp; \text{Josefa} &amp; 25 &amp; 1 \\
 \hline
\end{array}\end{split}\]</div>
<p>Escoger columnas de id y nombre de la tabla de <span class="math">\(\text{Ingenieros}\)</span>:</p>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\pi \hspace{0.2cm}_{(\text{id,nombre})} \hspace{0.3cm} \text{Ingenieros}\]</div>
<p>La tabla finalmente queda como:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros}  \\\end{split}\]\[\begin{split}\begin{array}{|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} \\
 \hline
 123 &amp; \text{Leon} \\
 \hline
 234 &amp; \text{Tomas} \\
 \hline
 345 &amp; \text{Jose} \\
 \hline
 143 &amp; \text{Josefa} \\
 \hline
\end{array}\end{split}\]</div>
</div>
<div class="section" id="id2">
<h4>Ejemplo 2<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Seleccionar id y nombre de los <span class="math">\(\text{Ingenieros}\)</span> que tienen más de 30 años.</p>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\begin{split}\pi \hspace{0.2cm} _{(\text{id,nombre})} (\sigma_{\text{edad&gt;30}} \hspace{0.3cm} \text{Ingenieros})\end{split}\]</div>
<img alt="../../_images/prosel.png" class="align-center" src="../../_images/prosel.png" />
<p>Se aprecia que las tuplas que no cumplan con la condición de selección quedan fuera del resultado,
luego se realiza un <tt class="docutils literal"><span class="pre">Project</span></tt> sobre las filas del resultado, separando solo las columnas que
contienen los atributos id y nombre. Finalmente la tabla queda de la siguiente manera:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} \\
 \hline
 123 &amp; \text{Leon} \\
 \hline
 234 &amp; \text{Tomas} \\
 \hline
 345 &amp; \text{Jose} \\
 \hline
\end{array}\end{split}\]</div>
</div>
</div>
<div class="section" id="producto-cartesiano-cross-product">
<h3>Producto cartesiano (Cross-Product)<a class="headerlink" href="#producto-cartesiano-cross-product" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-4">En teoría de conjuntos, el <tt class="docutils literal"><span class="pre">producto</span> <span class="pre">cartesiano</span></tt> de dos conjuntos es una operación
que resulta en otro conjunto cuyos elementos son todos los pares ordenados que
pueden formarse tomando el primer elemento del par del primer conjunto,
y el segundo elemento del segundo conjunto. En el Álgebra Relacional se mantiene
esta idea con la diferencia que <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span> son relaciones, entonces los miembros de <span class="math">\(\text{R}\)</span>
y <span class="math">\(\text{S}\)</span> son tuplas, que generalmente consisten de más de un componente,
cuyo resultado de la vinculación de una tupla de <span class="math">\(\text{R}\)</span> con una tupla de <span class="math">\(\text{S}\)</span> es una tupla
más larga, con un componente para cada uno de los componentes de las tuplas
constituyentes. Es decir <tt class="docutils literal"><span class="pre">Cross-product</span></tt> define una relación que es la concatenación
de cada una de las filas de la relación <span class="math">\(\text{R}\)</span> con cada una de las filas de la relación <span class="math">\(\text{S}\)</span>.</p>
<p><strong>Notación en Álgebra Relacional</strong></p>
<p>Para representar <tt class="docutils literal"><span class="pre">Cross-product</span></tt> en Álgebra Relacional se utiliza la siguiente
terminología:</p>
<div class="math">
\[\text{R} \times \text{S}\]</div>
<p>Por convención para la sentencia anterior, los componentes de <span class="math">\(\text{R}\)</span> preceden a los
componentes de <span class="math">\(\text{S}\)</span> en el orden de atributos para el resultado, creando así una nueva
relación con todas las combinaciones posibles de tuplas de <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span>.
El número de tuplas de la nueva relación resultante es la multiplicación de la cantidad
de tuplas de <span class="math">\(\text{R}\)</span> por la cantidad de tuplas que tenga <span class="math">\(\text{S}\)</span> (producto de ambos).
Si <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span> tienen algunos atributos en común, entonces se debe inventar nuevos nombres
para al menos uno de cada par de atributos idénticos. Para eliminar la ambigüedad de
un atributo <em>a</em>, que se encuentra en <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span>, se usa <span class="math">\(R.a\)</span> para el atributo de <span class="math">\(\text{R}\)</span> y <span class="math">\(S.a\)</span> para
el atributo de <span class="math">\(\text{S}\)</span>.</p>
<p>Cabe mencionar que por notación que: <span class="math">\(\text{R} \times \text{S} \neq  \text{S} \times \text{R}\)</span></p>
<div class="section" id="id3">
<h4>Ejemplo 1<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h4>
<img alt="../../_images/CROSS-PRODUCT1.png" class="align-center" src="../../_images/CROSS-PRODUCT1.png" />
<p>Con las tablas dadas realice el <tt class="docutils literal"><span class="pre">Cross-product</span></tt> de <span class="math">\(\text{R}\)</span> con <span class="math">\(\text{S}\)</span>:</p>
<img alt="../../_images/CROSS-PRODUCT2.png" class="align-center" src="../../_images/CROSS-PRODUCT2.png" />
<p>Con azul se resaltan las tuplas que provienen de <span class="math">\(\text{R}\)</span> que preseden y se mezclan
con las de <span class="math">\(\text{S}\)</span> resaltadas en verde.</p>
<p>Con las tablas dadas realice el <tt class="docutils literal"><span class="pre">Cross-product</span></tt> de <span class="math">\(\text{S}\)</span> con <span class="math">\(\text{R}\)</span>:</p>
<img alt="../../_images/CROSS-PRODUCT3.png" class="align-center" src="../../_images/CROSS-PRODUCT3.png" />
</div>
<div class="section" id="id4">
<h4>Ejemplo 2<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Dada las siguientes tablas:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{d#} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 \\
 \hline
 143 &amp; \text{Josefa} &amp; 25 \\
 \hline
\end{array}\end{split}\]\[\begin{split}\textbf{Tabla Proyectos} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|}
 \hline
 \textbf{proyecto} &amp; \textbf{duracion} \\
 \hline
 \text{ACU0034} &amp; 300 \\
 \hline
 \text{USM7345} &amp; 60 \\
 \hline
\end{array}\end{split}\]</div>
<p>Escriba la tabla resultante al realizar la siguiente operación:</p>
<div class="math">
\[\textbf{Ingenieros} \times \textbf{Proyectos}\]</div>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\begin{split}\textbf{Ingenieros} \times \textbf{Proyectos} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{d#} &amp; \textbf{proyecto} &amp; \textbf{duracion} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 &amp; \text{ACU0034} &amp; 300 \\
 \hline
 123 &amp; \text{Leon} &amp; 39 &amp; \text{USM7345} &amp; 60 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 &amp; \text{ACU0034} &amp; 300 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 &amp; \text{USM7345} &amp; 60 \\
 \hline
 143 &amp; \text{Josefa} &amp; 25 &amp; \text{ACU0034} &amp; 300 \\
 \hline
 143 &amp; \text{Josefa} &amp; 25 &amp; \text{USM7345} &amp; 60 \\
 \hline
\end{array}\end{split}\]</div>
</div>
</div>
<div class="section" id="naturaljoin">
<h3>NaturalJoin<a class="headerlink" href="#naturaljoin" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-5">Este operador se utiliza cuando se tiene la necesidad de unir relaciones vinculando
sólo las tuplas que coinciden de alguna manera. <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt> une sólo los pares de
tuplas de <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span> que sean comunes. Más precisamente una tupla r de
<span class="math">\(\text{R}\)</span> y una tupla s de <span class="math">\(\text{S}\)</span> se emparejan correctamente si y sólo si r y s
coinciden en cada uno de los valores de los atributos comunes, el resultado de la
vinculación es una tupla, llamada <strong>joined tuple</strong>. Entonces, al realizar <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt>
se obtiene una relación con los atributos de ambas relaciones y se obtiene combinando las
tuplas de ambas relaciones que tengan el mismo valor en los atributos comunes.</p>
<p><strong>Notación en Álgebra Relacional</strong></p>
<p>Para denotar <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt> se utiliza la siguiente simbología: <span class="math">\(\text{R} \rhd \hspace{-0.1cm} \lhd \text{S}\)</span>.</p>
<p><strong>Equivalencia con operadores básicos</strong></p>
<p><tt class="docutils literal"><span class="pre">NaturalJoin</span></tt> puede ser escrito en términos de algunos operadores ya vistos, la equivalencia
es la siguiente:</p>
<div class="math">
\[R \rhd \hspace{-0.1cm} \lhd S=  \pi \hspace{0.2cm} _{R.A_1,...,R.A_n,  S.A_1,...,S.A_n} (\sigma_{R.A_1=S.A_1 \wedge ... \wedge R.A_n=S.A_n  }\hspace{0.3cm} (R \times S ))\]</div>
<p><strong>Método</strong></p>
<blockquote>
<div><ol class="arabic simple">
<li>Se realiza el producto cartesiano <span class="math">\(\text{R} \times \text{S}\)</span> .</li>
<li>Se seleccionan aquellas filas del producto cartesiano para las que los atributos
comunes tengan el mismo valor.</li>
<li>Se elimina del resultado una ocurrencia (columna) de cada uno de los atributos comunes.</li>
</ol>
</div></blockquote>
<div class="section" id="id5">
<h4>Ejemplo 1<a class="headerlink" href="#id5" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="math">
\[\begin{split}\textbf{R}  \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{a} &amp; \textbf{b} &amp; \textbf{c} \\
 \hline
 1 &amp; 2 &amp; 3 \\
 \hline
 4 &amp; 5 &amp; 6 \\
 \hline
\end{array}\end{split}\]\[\begin{split}\textbf{S} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|}
 \hline
 \textbf{c} &amp; \textbf{d} \\
 \hline
 7 &amp; 5 \\
 \hline
 6 &amp; 2 \\
 \hline
 3 &amp; 4 \\
 \hline
\end{array}\end{split}\]</div>
<p>Con las tablas dadas realice el <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt> de <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span>:</p>
<img alt="../../_images/NATURALJOIN.png" class="align-center" src="../../_images/NATURALJOIN.png" />
<p>El atributo que tienen en común <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span> es el atributo <em>c</em>, entonces
las tuplas se unen donde <em>c</em> tiene el mismo valor en <span class="math">\(\text{R}\)</span> y <span class="math">\(\text{S}\)</span></p>
<div class="math">
\[\begin{split}\textbf{R} \rhd \hspace{-0.1cm} \lhd \textbf{S} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|}
 \hline
 \textbf{a} &amp; \textbf{b} &amp; \textbf{c} &amp; \textbf{d} \\
 \hline
 1 &amp; 2 &amp; 3 &amp; 4 \\
 \hline
 4 &amp; 5 &amp; 6 &amp; 2 \\
 \hline
\end{array}\end{split}\]</div>
</div>
<div class="section" id="id6">
<h4>Ejemplo 2<a class="headerlink" href="#id6" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Realizar <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt> a las siguientes tablas:</p>
<div class="math">
\[\begin{split}\textbf{Tabla Ingenieros} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{d#} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 \\
 \hline
 234 &amp; \text{Tomas} &amp; 34\\
 \hline
 143 &amp; \text{Josefa} &amp; 25 \\
 \hline
 090 &amp; \text{Maria} &amp; 34 \\
 \hline
\end{array}\end{split}\]\[\begin{split}\textbf{Tabla Proyectos} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|}
 \hline
 \textbf{d#} &amp; \textbf{proyecto}\\
 \hline
 39 &amp; \text{ACU0034} \\
 \hline
 34 &amp; \text{USM7345} \\
 \hline
\end{array}\end{split}\]</div>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\begin{split}\textbf{Ingenieros} \rhd \hspace{-0.1cm} \lhd \textbf{Proyectos} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|}
 \hline
 \textbf{id} &amp; \textbf{nombre} &amp; \textbf{d#} &amp; \textbf{proyecto} \\
 \hline
 123 &amp; \text{Leon} &amp; 39 &amp; \text{ACU0034} \\
 \hline
 234 &amp; \text{Tomas} &amp; 34 &amp; \text{USM7345} \\
 \hline
 090 &amp; \text{Maria} &amp; 34 &amp; \text{USM7345} \\
 \hline
\end{array}\end{split}\]</div>
</div>
</div>
<div class="section" id="thetajoin">
<h3>ThetaJoin<a class="headerlink" href="#thetajoin" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-6">Define una relación que contiene las tuplas que satisfacen el predicado <span class="math">\(C\)</span> en el
<tt class="docutils literal"><span class="pre">Cross-Product</span></tt> de <span class="math">\(\text{R} \times \text{S}\)</span>.
Conecta relaciones cuando los valores de determinadas columnas tienen una interrelación
específica. La condición <span class="math">\(C\)</span> es de la forma <tt class="docutils literal"><span class="pre">R.ai</span> <span class="pre">&lt;operador_de_comparación&gt;</span> <span class="pre">S.bi</span></tt>,
esta condición es del mismo tipo que se utiliza <tt class="docutils literal"><span class="pre">Select</span></tt> . El predicado no tiene por que
definirse sobre atributos comunes. El término “join” suele referirse a <tt class="docutils literal"><span class="pre">ThetaJoin</span></tt>.</p>
<p><strong>Notación en Álgebra Relacional</strong></p>
<p>La notación de <tt class="docutils literal"><span class="pre">ThetaJoin</span></tt> es el mismo símbolo que se utiliza para <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt>, la
diferencia radica en que <tt class="docutils literal"><span class="pre">ThetaJoin</span></tt> lleva el predicado <span class="math">\(C\)</span>:</p>
<div class="math">
\[\begin{split}\text{R} \rhd \hspace{-0.1cm} \lhd_C \text{S} \\\end{split}\]</div>
<p><tt class="docutils literal"><span class="pre">C</span> <span class="pre">=</span> <span class="pre">&lt;Atributo&gt;</span> <span class="pre">&lt;Comparador&gt;</span> <span class="pre">&lt;Atributo</span> <span class="pre">o</span> <span class="pre">Constante</span> <span class="pre">del</span> <span class="pre">Dominio&gt;</span></tt> Donde: <tt class="docutils literal"><span class="pre">&lt;Comparador&gt;</span></tt> <span class="math">\(\in {\{=,\geq,&gt;,&lt;, \neq,\leq \}}\)</span></p>
<p><strong>Equivalencia con operadores básicos</strong></p>
<p>Al igual <tt class="docutils literal"><span class="pre">NaturalJoin</span></tt>, <tt class="docutils literal"><span class="pre">ThetaJoin</span></tt> puede ser escrito en función de los operadores vistos
anteriormente:</p>
<div class="math">
\[R \rhd \hspace{-0.1cm} \lhd_C S= \sigma_{F} (R \times S)\]</div>
<p><strong>Método</strong></p>
<blockquote>
<div><ol class="arabic simple">
<li>Se&nbsp;forma&nbsp;el&nbsp;<a href="#id7"><span class="problematic" id="id8"><b></b></span></a>producto&nbsp;cartesiano<b></b>&nbsp;<span class="math">\(\text{R} \times \text{S}\)</span> .</li>
<li>Se&nbsp;selecciona,&nbsp;en&nbsp;el&nbsp;producto,&nbsp;solo&nbsp;la&nbsp;tupla&nbsp;que&nbsp;cumplan&nbsp;la&nbsp;condición <span class="math">\(C\)</span>.</li>
</ol>
</div></blockquote>
<div class="section" id="id9">
<h4>Ejemplo 1<a class="headerlink" href="#id9" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="math">
\[\begin{split}\textbf{R} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|}
 \hline
 \textbf{a} &amp; \textbf{b} &amp; \textbf{c} &amp; \textbf{d} \\
 \hline
 1 &amp; 3 &amp; 5 &amp; 7 \\
 \hline
 3 &amp; 2 &amp; 9 &amp; 1 \\
 \hline
 2 &amp; 3 &amp; 5 &amp; 4 \\
 \hline
\end{array}\end{split}\]\[\begin{split}\textbf{S} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|}
 \hline
 \textbf{a} &amp; \textbf{c} &amp; \textbf{e} \\
 \hline
 1 &amp; 5 &amp; 2 \\
 \hline
 1 &amp; 5 &amp; 9 \\
 \hline
 3 &amp; 9 &amp; 2 \\
 \hline
 2 &amp; 3 &amp; 7 \\
 \hline
\end{array}\end{split}\]</div>
<p>Escriba la tabla resultante al realizar la siguiente operación:</p>
<div class="math">
\[\begin{split}R \rhd \hspace{-0.1cm} \lhd_{(a&nbsp;&gt;=&nbsp;e)} S\end{split}\]</div>
<p><strong>Respuesta</strong></p>
<img alt="../../_images/THETAJOIN1.png" class="align-center" src="../../_images/THETAJOIN1.png" />
<p>Se compara el atributo <em>a</em> de la primera fila de <span class="math">\(R\)</span> con cada uno de los valores del atributo
<em>e</em> de la tabla <span class="math">\(S\)</span>. En este caso ninguna de las comparaciones devuelve el valor verdadero (true).</p>
<img alt="../../_images/THETAJOIN2.png" class="align-center" src="../../_images/THETAJOIN2.png" />
<p>Luego se compara el atributo <em>a</em> de la segunda fila de <span class="math">\(\text{R}\)</span> con cada uno de los valores del atributo
<em>e</em> de la tabla <span class="math">\(\text{S}\)</span>. En este caso 2 comparaciones devuelven el valor verdadero (<tt class="docutils literal"><span class="pre">true</span></tt>), por lo que en
la relación de resultado quedará la segunda fila de <span class="math">\(\text{R}\)</span> mezclada con la primera y tercera fila de <span class="math">\(\text{S}\)</span>.</p>
<img alt="../../_images/THETAJOIN3.png" class="align-center" src="../../_images/THETAJOIN3.png" />
<p>De igual forma ahora se compara el valor de <em>a</em> de la tercera tupla de <span class="math">\(R\)</span>, nuevamente 2 tuplas de <span class="math">\(S\)</span>
cumplen con la condición.</p>
<div class="math">
\[\begin{split}\textbf{S} \\\end{split}\]\[\begin{split}\begin{array}{|c|c|c|c|c|c|c|}
 \hline
 \textbf{R.a} &amp; \textbf{b} &amp; \textbf{R.c} &amp; \textbf{d} &amp; \textbf{S.a} &amp; \textbf{S.c} &amp; \textbf{e} \\
 \hline
 3 &amp; 2 &amp; 9 &amp; 1 &amp; 1 &amp; 5 &amp; 2 \\
 \hline
 3 &amp; 2 &amp; 9 &amp; 1 &amp; 3 &amp; 9 &amp; 2 \\
 \hline
 2 &amp; 3 &amp; 5 &amp; 4 &amp; 1 &amp; 5 &amp; 2 \\
 \hline
 2 &amp; 3 &amp; 5 &amp; 4 &amp; 3 &amp; 9 &amp; 2 \\
 \hline
\end{array}\end{split}\]</div>
</div>
<div class="section" id="id10">
<h4>Ejemplo 2<a class="headerlink" href="#id10" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Con el esquema conceptual siguiente, hallar los nombres de los directores de cada departamento:</p>
<p><span class="math">\(\text{Dpto} (\underline{\text{numDpto}} \text{, nombre, nIFDirector, fechaInicio})\)</span></p>
<p><span class="math">\(\text{Empleado} (\underline{\text{nIF}} \text{, nombre, direccion, salario, dpto, nIFSupervisor})\)</span></p>
<p><strong>Respuesta</strong></p>
<div class="math">
\[\pi_{(\text{Dpto.nombre,empleado.nombre})} (\text{Dpto} \rhd \hspace{-0.1cm} \lhd_{\text{nIFDirector=NIF}} \text{Empleado})\]</div>
<ul class="simple">
<li>Tuplas con &#8220;Null&#8221; en los “Atributos de la Reunión”, no se incluyen en el resultado.</li>
</ul>
</div>
<div class="section" id="ejercicio-propuesto">
<h4>Ejercicio propuesto<a class="headerlink" href="#ejercicio-propuesto" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Considere la siguiente base de datos:</p>
<blockquote>
<div><ol class="arabic simple">
<li><span class="math">\(\text{Persona}(\underline{\text{nombre}} \text{, edad, genero})\)</span> : nombre es la clave.</li>
<li><span class="math">\(\text{Frecuenta}(\underline{\text{nombre, pizzeria}})\)</span> : (nombre, pizzeria) es la clave.</li>
<li><span class="math">\(\text{Come}(\underline{\text{nombre, pizza}})\)</span> : (name, pizza) es la clave.</li>
<li><span class="math">\(\text{Sirve}(\underline{\text{pizzeria, pizza}}\text{, precio})\)</span>: (pizzeria, pizza) es la clave.</li>
</ol>
</div></blockquote>
<p>Escribir expresiones en álgebra relacional para las siguientes dos preguntas:</p>
<blockquote>
<div><ul class="simple">
<li>Seleccionar a las personas que comen pizzas con extra queso.</li>
<li>Seleccionar a las personas que comen pizzas con extra queso y frecuentan la
pizzería X.</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="lecture4.html" title="Lectura 4 - Álgebra Relacional: Set operators, renaming, notation"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="lecture2.html" title="Lectura 2 - Bases de datos relacionales: Consulta de bases de datos relacionales"
             >anterior</a> |</li>
        <li><a href="../../index.html">Curso SQL</a> &raquo;</li>
          <li><a href="index.html" >Primera Semana</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Computer Systems Research Group (CSRG), UTFSM.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>